<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Sketch Maze – Base Prototype</title>
  <style>
    :root{
      --ink:#2b2b2b;
      --paper:#f7f4ee;
      --accent:#9bb7ff;
      --haze:rgba(120,120,120,.35);
    }
    html,body{overflow: hidden;margin:0;padding:0;background:var(--paper);color:var(--ink);font-family:ui-monospace, Menlo, Consolas, monospace;}
    #game{width:100vw; border-bottom:2px dashed var(--ink);}    
    #world{position:absolute; left:0; bottom:0; height:100%; width:3000px;}
    .ground{position:absolute; bottom:0; left:0; height:80px; width:100%; border-top:3px solid var(--ink); background:linear-gradient(#0000, #0001);}    
    .tree{position:absolute; bottom:80px; width:180px; height:260px; border:3px solid var(--ink); border-radius:90px 90px 40px 40px;}
    .trunk{position:absolute; bottom:80px; width:140px; height:40px; border:3px solid var(--ink); background:#fff;}
    .apple{position:absolute; width:26px; height:26px; border:3px solid var(--ink); border-radius:50%; background:#fff; cursor:pointer;}
    .apple.glow{box-shadow:0 0 0 0 rgba(155,183,255,.8); animation:glow 1.2s ease-in-out 2;}
    @keyframes glow{50%{box-shadow:0 0 18px 6px rgba(155,183,255,.8)}}

#world {
  display: none;
}

#world { pointer-events:none; }
canvas { display:block; }
#player { display:none; }
    .path{position:absolute; bottom:80px; width:160px; height:120px; border:3px dashed var(--ink); text-align:center; line-height:120px;}
    .path.hazy{opacity:.45; filter:blur(1px);}    

    #player{position:absolute; bottom:80px; width:34px; height:54px; border:3px solid var(--ink); background:#fff; transition:bottom .1s;}    
    #player.jump{animation:jump 0.45s ease-in-out forwards;}
    @keyframes jump{
      0%{transform:translateY(0)}
      50%{transform:translateY(-90px)}
      100%{transform:translateY(0)}
    }

    .platform{position:absolute; bottom:120px; width:120px; height:16px; border:3px solid var(--ink); background:#fff;}    
    #player.crouch{height:34px;}

    #ui{
  position:fixed;
  top:8px;
  left:8px;
  z-index:10;
}    
    #basket{border:3px solid var(--ink); padding:6px 10px;}    
    #basket { width: fit-content; }

    #overlay{position:absolute; inset:0; background:rgba(247,244,238,.95); display:none;}    
    #map{margin:20px auto; width:90%; height:60%; border:3px solid var(--ink); position:relative;}    
    .map-node{position:absolute; width:120px; height:60px; border:3px dashed var(--ink); text-align:center; line-height:60px;}    
    .locked{opacity:.35;}

    .note{padding:10px; font-size:14px;}
  </style>
</head>
<body>
  <div id="ui">
    <div id="basket">Inventory: <span id="inv">(empty)</span></div>
  </div>

  <canvas id="game" width="800" height="400"></canvas>
    <div id="world">
      <div class="ground"></div>
      <!-- Orchard -->
      <div class="tree" style="left:200px"></div>
      <div class="trunk" style="left:220px"></div>
      <div id="apple1" class="apple" style="left:260px; bottom:240px"></div>

      <!-- Platform near Frog -->
      <div class="platform" id="frogPlatform" style="left:800px"></div>

      <!-- Paths -->
      <div id="path1" class="path" style="left:520px">Path I</div>
      <div id="path2" class="path hazy" style="left:720px">Path II</div>
      <div id="path3" class="path hazy" style="left:920px">Path III</div>

      <!-- Frog NPC -->
      <div id="frog" style="position:absolute; left:820px; bottom:80px; width:48px; height:42px; border:3px solid var(--ink); border-radius:20px 20px 16px 16px; background:#fff;">
        <div style="position:absolute; top:-18px; left:10px; width:26px; height:14px; border:3px solid var(--ink); background:#fff"></div>
        <div style="position:absolute; right:-10px; bottom:6px; width:20px; height:4px; border-top:3px solid var(--ink)"></div>
      </div>
      
      <!-- Dialogue -->
      <div id="dialogue" style="display:none; position:absolute; left:760px; bottom:160px; max-width:260px; border:3px solid var(--ink); background:var(--paper); padding:8px;">
        <div id="dialogueText"></div>
      </div>

      <!-- Player -->
      <div id="player" style="left:120px"></div>
    </div>
    </div>

    <!-- Map Overlay -->
    <div id="overlay">
      <div id="map">
        <div class="map-node" style="left:40px; top:40px">Orchard</div>
        <div class="map-node" style="left:220px; top:40px">Path I</div>
        <div class="map-node locked" style="left:400px; top:40px">Path II</div>
        <div class="map-node locked" style="left:580px; top:40px">Path III</div>
      </div>
    </div>
  </div>

  <script>
    const canvas = document.getElementById("game");
    const ctx = canvas.getContext("2d");
    const inv=document.getElementById('inv');
    const overlay=document.getElementById('overlay');
    let cameraX = 0;
    let hasApple = false;

  const keys = {
    left: false,
    right: false,
    up: false,
    down: false,
    space: false
};

// player
  const player = {
    x: 120,
    y: 0,
    width: 40,
    height: 54,
    speed: 3,
    jumping: false,
    jumpVelocity: 0
};

  // add frog
    const frog = {
      x: 820,
      y: 0,
      width: 48,
      height: 36,
      bob: 0
    };

const appleObj = {
  x: 260,
  y: 0,
  radius: 10,
  falling: true,
  glow: false,
  collected: false
};

    const camera = {
      topDown: false,
      locked: false
};
  const groundY = 300;

  const platforms = [  {
    x: 400,
    y: groundY - 80, // 80px ABOVE the ground
    width: 120,
    height: 12
  }
];
    
// arrow keys move, stop when key released; spacebar changes camera angle
    // movement intent
function handleInput() {
  if (keys.left) player.x -= player.speed;
  if (keys.right) player.x += player.speed;

  if (keys.up && !player.jumping) {
    player.jumping = true;
    player.jumpVelocity = 12;
  }

  if (keys.space && !camera.locked) {
    camera.topDown = !camera.topDown;
    camera.locked = true;
  }
  if (!keys.space) camera.locked = false;
}
  
// motion over time
function applyPhysics() {
  // gravity
  player.y += player.jumpVelocity;
  player.jumpVelocity -= 0.8;

// apple falls at intro
if (appleObj.falling) {
  appleObj.y -= 1.5;
  if (appleObj.y <= 0) {
    appleObj.y = 0;
    appleObj.falling = false;
  }
}

  // ground collision
  if (player.y <= 0) {
    player.y = 0;
    player.jumping = false;
    player.jumpVelocity = 0;
  }

  // platforms
  platforms.forEach(p => {
    const playerBottom = groundY - player.y;
    if (
      player.x + player.width > p.x &&
      player.x < p.x + p.width &&
      playerBottom >= p.y &&
      playerBottom <= p.y + p.height &&
      player.jumpVelocity <= 0
    ) {
      player.y = groundY - p.y;
      player.jumping = false;
      player.jumpVelocity = 0;
    }
  });

// frog idle animation
  frog.bob += 0.05;
}


// draw the bois an friends

function draw() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  ctx.fillStyle = "red";
  ctx.fillRect(10, 10, 10, 10);

// sky
const skyGrad = ctx.createLinearGradient(0, 0, 0, groundY);
skyGrad.addColorStop(0, "#b9d7ff");
skyGrad.addColorStop(1, "#eef6ff");
ctx.fillStyle = skyGrad;
ctx.fillRect(0, 0, canvas.width, groundY);

// ground
const groundGrad = ctx.createLinearGradient(0, groundY, 0, canvas.height);
groundGrad.addColorStop(0, "#6f8f5e");
groundGrad.addColorStop(1, "#4f6f46");
ctx.fillStyle = groundGrad;
ctx.fillRect(0, groundY, canvas.width, canvas.height - groundY);


// camera view toggle
if (camera.topDown) {
  ctx.save();
  ctx.translate(0, -100);
  ctx.scale(1, 0.7);
}

  // ground
  ctx.fillStyle = "#2b2b2b";
  ctx.fillRect(0, groundY, canvas.width, 4);

  // player
ctx.fillStyle = "#7a6cff";
ctx.beginPath();
ctx.roundRect(
  player.x - cameraX,
  groundY - player.height - player.y,
  player.width,
  player.height,
  8
);
ctx.fill();

// soft shadow
ctx.fillStyle = "rgba(0,0,0,0.15)";
ctx.beginPath();
ctx.ellipse(
  player.x - cameraX + player.width / 2,
  groundY + 4,
  18,
  6,
  0,
  0,
  Math.PI * 2
);
ctx.fill();


// frog, sketch style
const frogY =
  groundY - frog.height - frog.y + Math.sin(frog.bob) * 2;

ctx.strokeStyle = "#2b2b2b";
ctx.fillStyle = "#ffffff";
ctx.lineWidth = 3;

// body
ctx.fillStyle = "#5f8f63";
ctx.beginPath();
ctx.roundRect(
  frog.x - cameraX,
  frogY,
  frog.width,
  frog.height,
  10
);
ctx.fill();

// hat
ctx.fillRect(
  frog.x - cameraX + 12,
  frogY - 14,
  24,
  6
);
ctx.strokeRect(
  frog.x - cameraX + 18,
  frogY - 28,
  12,
  14
);

// draw apple, sketch style
if (!appleObj.collected) {
  const ax = appleObj.x - cameraX;
  const ay = groundY - appleObj.y - 14;

  // apple body
ctx.fillStyle = "#c9433f";
ctx.beginPath();
ctx.arc(
  appleObj.x - cameraX,
  groundY - appleObj.y - 12,
  appleObj.radius,
  0,
  Math.PI * 2
);
ctx.fill();

// apple highlight
ctx.fillStyle = "rgba(255,255,255,0.4)";
ctx.beginPath();
ctx.arc(
  appleObj.x - cameraX - 3,
  groundY - appleObj.y - 16,
  3,
  0,
  Math.PI * 2
);
ctx.fill();

  // stem
  ctx.beginPath();
  ctx.moveTo(ax, ay - 12);
  ctx.lineTo(ax + 4, ay - 20);
  ctx.stroke();
}


  // platforms
ctx.fillStyle = "#2b2b2b";
platforms.forEach(p => {
  ctx.fillRect(
    p.x - cameraX,
    p.y,
    p.width,
    p.height
  );
});

// restore camera view
if (camera.topDown) {
  ctx.restore();
}
}

window.addEventListener("keydown", (e) => {
    if (["ArrowLeft","ArrowRight","ArrowUp","ArrowDown"," "].includes(e.key)) {
    e.preventDefault();
  }
  if (e.key === "ArrowLeft") keys.left = true;
  if (e.key === "ArrowRight") keys.right = true;
  if (e.key === "ArrowUp") keys.up = true;
  if (e.key === "ArrowDown") keys.down = true;
  if (e.key === " ") keys.space = true;
});

    
window.addEventListener("keyup", (e) => {
  if (e.key === "ArrowLeft") keys.left = false;
  if (e.key === "ArrowRight") keys.right = false;
  if (e.key === "ArrowUp") keys.up = false;
  if (e.key === "ArrowDown") keys.down = false;
  if (e.key === " ") keys.space = false;
});


// frog DOM version code, prob delete
    //const frog=document.getElementById('frog');
    //let frogBlinkTimer=0;
    //const dialogue=document.getElementById('dialogue');
    //const dialogueText=document.getElementById('dialogueText');
    //let talked=false;

    //function tryFrogTalk(){
      //if(talked) return;
      //const px = player.x;
      //const fx = frog.offsetLeft;
      //if(Math.abs(px-fx)<60){
        //talked=true;
        //dialogue.style.display='block';
        //dialogueText.innerHTML="Ah. You found <i>the</i> apple, didn’t you?<br><br>Paths open when things are carried with care.<br><br>I seem to have misplaced my bass…";
      //}
    //}

  // spine of update
function update() {
  handleInput();
  applyPhysics();
  draw();
  requestAnimationFrame(update);
  cameraX = player.x - canvas.width / 2;
  if (cameraX < 0) cameraX = 0;

}

update();
  
  </script>
</body>
</html>

---

## Added NPC: Frog Guide (Top Hat)

### Visual Style
- Hand-drawn sketch aesthetic
- Slightly oversized head, long limbs
- Wears a small **top hat**
- Carries a **walking stick** (later doubles as bass bow reference)
- Idle animation: gentle sway, occasional blink

### Location
- Appears in **Path One**, shortly after entering from orchard
- Stands near a mild obstacle (rock / stump)

### Interaction
- Mouse click or ↓ + interact range
- Dialogue appears in sketch-style speech bubble

### Dialogue (Initial)
> "Ah. You found *the* apple, didn’t you?"

> "Paths open when things are carried with care."

> "I seem to have misplaced my bass… perhaps it wandered ahead of me."

### Function
- Acts as:
  - Narrative anchor
  - Soft hint system
  - Side quest giver

### Side Quest Hook
- **Quest:** Help Frog find their stand-up bass
- Bass appears later in maze (different zone)
- Returning bass unlocks:
  - New traversal ability OR
  - Hidden shortcut OR
  - Decorative musical moment

### Multiplayer-Future Ready
- Frog dialogue can change depending on:
  - Which player interacted first
  - Whether both players are present
- Frog acknowledges shared progress subtly

---

